# 新版排場規則

## 核心原則
1. **絕對規則**：AB vs CD 兩隊等級相加差異必須在 ±1.5 以內
2. **放寬機制**：當無法滿足等級規則時，跳出通知「即將單次放寬組合標準以利進行組隊」，按OK後單次無視等級標準

## 選手選擇規則

### 情況一：準備區 1-4 人

| 準備區人數 | 上場組合 | 準備區選擇方式 | 剛下場選擇方式 |
|-----------|---------|---------------|---------------|
| **1人** | 準備區1人 + 剛下場3人 | 全上 | 剛下場4人隨機取3 |
| **2人** | 準備區2人 + 剛下場2人 | 全上 | 剛下場4人隨機取2 |
| **3人** | 準備區2人 + 剛下場2人 | (1)等待輪次最高2人<br>(2)等待輪次相同則隨機取2 | 剛下場4人隨機取2 |
| **4人** | 準備區3人 + 剛下場1人 | (1)等待輪次最高3人<br>(2)等待輪次相同則隨機取3 | 剛下場4人隨機取1 |

### 情況二：準備區 5 人以上

| 準備區人數 | 上場組合 | 準備區選擇方式 | 剛下場選擇方式 |
|-----------|---------|---------------|---------------|
| **5人** | 準備區3人 + 剛下場1人 | (1)等待輪次最高3人<br>(2)等待輪次相同則隨機取3 | 剛下場4人隨機取1 |
| **6人以上** | 準備區4人 | (1)等待2輪(含)以上隨機取2<br>(2)剩餘選手隨機補滿4人 | 全下 |

### 6人以上規則範例

**範例一：6人情況**
- A 等待2輪
- B 等待2輪  
- C 等待2輪
- D 等待1輪
- E 等待1輪
- F 剛加入

步驟：
1. 從ABC（等待2輪）隨機取2人，假設取AC
2. 從BDEF隨機取2人，與AC配對成符合等級規則的組合

**範例二：7人情況**
- M 等待3輪
- N 等待2輪
- O 等待1輪
- P 等待1輪
- Q 剛加入
- R 剛加入
- S 剛加入

步驟：
1. 從MN（等待2輪以上）取2人
2. 從OPQRS隨機取2人，與MN配對成符合等級規則的組合

**範例三：8人情況**
- S 等待2輪
- T 等待1輪
- U 等待1輪
- V 剛加入
- W 剛加入
- X 剛加入
- Y 剛加入
- Z 剛加入

步驟：
1. 從S（等待2輪以上）取1人
2. 從TUVWXYZ隨機取3人，與S配對成符合等級規則的組合

## 重要變更

1. **移除場次(matches)考量**：不再顯示和計算場次，僅使用等待輪次
2. **增加隨機性**：大幅增加隨機選擇，減少固定模式
3. **簡化規則**：移除複雜的多層規則系統

## 等待輪次定義
- **剛下場**：標記為 justFinished，等待輪次 = 0
- **等待1輪**：上一輪在準備區但未上場
- **等待2輪**：連續兩輪在準備區未上場
- **等待3輪以上**：需要優先處理的情況